/* --- FLOATING COMMAND KEY STYLES --- */

/* 1. THE CONTAINER (Floating Position) */
.switch-plate {
    position: fixed; /* This makes it float */
    bottom: 30px;
    right: 30px;
    z-index: 9999; /* Ensures it stays on top of the modal and footer */
    
    background: transparent;
    border: none;
    padding: 0;
    margin: 0;
    box-shadow: none;
    width: auto;
    
    /* Layout: Put text to the left of the button */
    display: flex;
    flex-direction: row; 
    align-items: center;
    gap: 15px;
}

/* 2. THE LABEL (Text to the left) */
.plate-title {
    background: #111;
    color: #fff;
    font-family: 'JetBrains Mono', monospace;
    font-size: 0.8rem;
    padding: 5px 10px;
    border-radius: 4px;
    border: 1px solid #333;
    
    /* Animation: Slide in from right */
    opacity: 100; 
    transform: translateX(0px);
    transition: all 0.3s ease;
    pointer-events: none; /* Let clicks pass through */
    
    /* Text Glow */
    text-shadow: 0 0 5px rgba(255,255,255,0.5);
}

/* Show label only on hover to keep interface clean */
.switch-plate:hover .plate-title {
    opacity: 1;
    transform: translateX(0);
}

/* 3. THE HOUSING (The Switch Base) */
.switch-housing {
    width: 60px;
    height: 60px;
    background: #050505;
    border-radius: 12px;
    position: relative;
    cursor: pointer;
    box-shadow: 
        0 10px 20px rgba(0,0,0,0.6),
        0 0 0 2px #222; /* Outer Bezel */
}

/* 4. THE TRACK (The LED Underglow) */
.switch-track {
    position: absolute;
    bottom: 0;
    left: 0;
    right: 0;
    height: 100%;
    border-radius: 12px;
    background: transparent;
    box-shadow: 0 0 0 transparent;
    transition: 0.3s;
    z-index: 1;
}

/* 5. THE KNOB (The Keycap) */
.switch-knob {
    position: absolute;
    top: -8px; /* Raised unpressed state */
    left: 50%;
    transform: translateX(-50%);
    width: 46px;
    height: 46px;
    
    background: #222; /* Keycap color */
    border: 1px solid #333;
    border-bottom: 6px solid #000; /* Physical key height */
    border-radius: 8px;
    
    display: flex;
    align-items: center;
    justify-content: center;
    
    transition: all 0.1s cubic-bezier(0.4, 0, 0.2, 1);
    z-index: 2;
}

/* Keycap Symbol */
.switch-knob::after {
    content: "REG"; /* Command text */
    font-family: 'JetBrains Mono', monospace;
    font-weight: 800;
    font-size: 0.8rem;
    color: #888;
}

/* Remove old decorative line */
.switch-knob::before { display: none; }


/* --- INTERACTIONS & LOGIC --- */

#retro-switch { display: none; }

/* HOVER EFFECT */
.switch-housing:hover .switch-knob {
    background: #2a2a2a;
    border-color: #444;
    color: #fff;
    transform: translateX(-50%) translateY(-2px); /* Slight lift */
}

/* CLICKED / REGISTERED STATE */

/* 1. Depress the Key */
#retro-switch:checked + .switch-housing .switch-knob {
    top: 4px; /* Move down */
    border-bottom: 0px solid #000; /* Lose height */
    background: #111;
    box-shadow: inset 0 2px 5px rgba(0,0,0,0.5);
}

/* 2. Success Green Text */
#retro-switch:checked + .switch-housing .switch-knob::after {
    content: "OK";
    color: #00ff88;
    text-shadow: 0 0 8px #00ff88;
}

/* 3. Success Green Underglow */
#retro-switch:checked + .switch-housing .switch-track {
    box-shadow: 0 0 30px #00ff88, inset 0 0 10px #00ff88;
}

/* 4. Update Label Text via CSS */
#retro-switch:checked ~ .plate-title {
    opacity: 1; /* Keep label visible if registered */
    transform: translateX(0);
}
#retro-switch:checked ~ .plate-title::before {
    content: "REGISTERED "; /* Prepends text */
}
#retro-switch:checked ~ .plate-title {
    font-size: 0; /* Hide original text */
}
#retro-switch:checked ~ .plate-title::before {
    font-size: 0.8rem; /* Show new text */
    color: #00ff88;
}